
> linuxdo-webssh-backend@1.0.0 start
> node server.js

LinuxDo WebSSH服务器运行在端口 3001
用户数据库连接成功
SQLite数据库连接成功
用户表初始化完成
创建点赞表失败: Error: SQLITE_ERROR: expressions prohibited in PRIMARY KEY and UNIQUE constraints
--> in Database#run('\n' +
  '            CREATE TABLE IF NOT EXISTS likes (\n' +
  '              id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '              from_user TEXT NOT NULL,\n' +
  '              to_user TEXT NOT NULL,\n' +
  '              timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n' +
  "              created_at INTEGER DEFAULT (strftime('%s', 'now')),\n" +
  '              UNIQUE(from_user, to_user, date(timestamp))\n' +
  '            )\n' +
  '          ', [Function (anonymous)])
    at Statement.<anonymous> (/workspaces/2/backend/services/chatService.js:57:19) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}
node:internal/process/promises:391
    triggerUncaughtException(err, true /* fromPromise */);
    ^

Error: SQLITE_ERROR: expressions prohibited in PRIMARY KEY and UNIQUE constraints
--> in Database#run('\n' +
  '            CREATE TABLE IF NOT EXISTS likes (\n' +
  '              id INTEGER PRIMARY KEY AUTOINCREMENT,\n' +
  '              from_user TEXT NOT NULL,\n' +
  '              to_user TEXT NOT NULL,\n' +
  '              timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,\n' +
  "              created_at INTEGER DEFAULT (strftime('%s', 'now')),\n" +
  '              UNIQUE(from_user, to_user, date(timestamp))\n' +
  '            )\n' +
  '          ', [Function (anonymous)])
    at Statement.<anonymous> (/workspaces/2/backend/services/chatService.js:57:19) {
  errno: 1,
  code: 'SQLITE_ERROR',
  __augmented: true
}

Node.js v20.19.0
